version: '3.8'

services:
  videostream:
    build:
      context: .
      dockerfile: dockerfile.videostream
    ports:
      - "${VIDEOSTREAM_PORT}:5000"  # Umgebungsvariable für den Host-Port
    volumes:
      - ./data:/data  # Mount the local 'data' directory to '/data' in the container
      - ./app:/app
    depends_on:
      - configserver

  configserver:
    build:
      context: .
      dockerfile: dockerfile.configserver
    ports:
      - "${CONFIGSERVER_PORT}:5000"  # Umgebungsvariable für den Host-Port
    volumes:
      - ./data:/data  # Mount the local 'data' directory to '/data' in the container
      - ./app:/app
